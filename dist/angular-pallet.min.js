!function(){"use strict";angular.module("platanus.pallet",["ngFileUpload"])}();
!function(){"use strict";angular.module("platanus.pallet").constant("trashIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAqCAQAAADhEEisAAAAAmJLR0QA/4eP\nzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQffCRQUHjb9AwcJAAAB\nwElEQVRIx+3Wv2sUQRQH8M/snZ4iiWIUsVJQbCJCasH8Cf5ABEGwsrBQ0MbO\nRgT/CAU7CVhY2QiKcAixEQvBKiBGLnB3CRHPQO4ua+He7a7snndaiXkDM7xh\nvvPefvc784Yim/ZEUztpLXUnC9cJhbP3XdPSy6xacrZoYbUQ/tK7DBj6grg8\n+l6zapn5eESmfUuW06ld7rmqom98q7vlE0HkqTPaNgojllnFd+esRC6a19AR\nJ/DR/WDsqblJ5Lz2LzSNa/Oiqude2/JnVv3J5ox9EwI3fU7/+23XJyKOj06n\n8FhDdyJ4I6+6WCwW+E2feiDK7dm1YDHjL1rIZLXi8UBtxZp/5oGKV6bAmht6\ndrgwPEh1dY+yLEU5la+jP+Tjmx62VBNJreOrqaHAcvCQEWTWD0lL8814kb+y\naukRjUuPb+G3hxH3UCjztpPfTv5/S/6fpm5SeCiDxziGgw4l/oz9mE2qAMdx\nKqkIud3uuqQrFqw6qqaZFIMNkROW9ZMt2uas6eCDK2n0t8McDtjUGnq7Tfsy\nfHVEDmvqgPfZ6MFDcxMwsOqyZnqn88IeR+wcA9r1xp1BiQw5GmtjwTNvkR//\nn52kKbQ1VwAAAABJRU5ErkJggg==\n")}();
!function(){function e(e,l){function a(a,o,n,t){function r(l){var o=l.shift();if(o){var n={url:a.uploadUrl,file:o};(a.startCallback||angular.noop)({file:{localFileName:o.name}}),e.upload(n).success(function(e){var l=e.upload||e,n={localFileName:o.name,loaded:1,total:1};i(l.identifier),l.localFileName=o.name,a.processedFilesCount--,(a.progressCallback||angular.noop)({event:n}),(a.successCallback||angular.noop)({uploadData:l})}).progress(function(e){var l={localFileName:o.name,loaded:.95*e.loaded,total:e.total};(a.progressCallback||angular.noop)({event:l})}).error(function(e,l){var n={localFileName:o.name,loaded:1,total:1},t={localFileName:o.name,error:e,status:l};console.error(t),a.processedFilesCount--,(a.progressCallback||angular.noop)({event:n}),(a.errorCallback||angular.noop)({errorData:t})}),r(l)}}function i(e){if(!e)return void t.$setViewValue(null);if(a.multiple){var l=t.$viewValue||[];return l.push(e),void t.$setViewValue(l)}t.$setViewValue(e)}function u(e){a.safeApply(function(){e&&e.length&&(a.multiple||(e=[e[0]]),i(null),a.processedFilesCount=e.length,(a.initCallback||angular.noop)(),r(e))})}function s(){return a.buttonLabel||"Select file..."}function c(){(a.removeCallback||angular.noop)(),i(null)}function p(){return!t.$viewValue}function d(){return a.processedFilesCount>g}var f=-1,g=0;a.processedFilesCount=f,a.multiple=!1,a.upload=u,a.getButtonLabel=s,a.trashIcon=l,a.onRemoveUpload=c,a.emptyIdentifier=p,a.isLoading=d,a.$watch("processedFilesCount",function(e){e===g&&(a.processedFilesCount=f,(a.doneCallback||angular.noop)())}),a.safeApply=function(e){var l=this.$root.$$phase;"$apply"===l||"$digest"===l?e&&"function"==typeof e&&e():this.$apply(e)}}var o={template:'<div class="pallet-file-selector"><div class="upload-btn" ngf-change="upload($files)" ngf-select ngf-multiple="multiple" ng-model="files"> <button>{{ getButtonLabel() }}</button> </div><img class="remove-btn" ng-src="{{ trashIcon }}" ng-click="onRemoveUpload()" ng-hide="emptyIdentifier() || isLoading()" /></div>',require:"ngModel",scope:{uploadUrl:"@",buttonLabel:"@",multiple:"@",initCallback:"&",startCallback:"&",successCallback:"&",progressCallback:"&",errorCallback:"&",removeCallback:"&",doneCallback:"&"},link:a};return o}angular.module("platanus.pallet").directive("palletFileSelector",e),e.$inject=["Upload","trashIcon"]}();